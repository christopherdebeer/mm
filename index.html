<html>
  <head>
    <title></title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.9/d3.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/rickshaw/1.4.6/rickshaw.js"></script>
    <meta http-equiv="content-type" content="text/html; charset=UTF8">
  </head>
  <body>

  <div id="chart1"></div>
  <div id="chart2"></div> 
 
  <script> 
   
    var graph = new Rickshaw.Graph.JSONP( {
        element: document.querySelector("#chart1"), 
        width: document.clientWidth, 
        height: 300,
        renderer: 'multi',
        series: [{
          color: 'green', 
          name: 'spread',
          renderer: 'line',
        },{
          color: 'blue', 
          name: 'ideal',
          renderer: 'line',
        }],
        dataURL: '/data',
        onData: function(data) {

          return [{
              name: 'spread',
              data: _.map( data, function(d){
                return {
                  x: d.time,
                  y: d.spread.percent
                };
              })
          },{
              name: 'ideal',
              data: _.map( data, function(d){
                return {
                  x: d.time,
                  y: 0.5
                };
              })
          }];
        },
        onComplete: function(transport) {
          var graph = transport.graph;
          var detail = new Rickshaw.Graph.HoverDetail({ graph: graph });
          var axes = new Rickshaw.Graph.Axis.Time( { graph: graph } );
        }
    });
    

    var scale = d3.scale.linear().domain([610, 650]).nice();

    var graph = new Rickshaw.Graph.JSONP( {
        element: document.querySelector("#chart2"), 
        width: document.clientWidth, 
        height: 300,
        renderer: 'multi',
        series: [{
          color: 'green', 
          name: 'bid',
          renderer: 'line',
        },{
          color: 'red', 
          name: 'ask',
          renderer: 'line',
        }],
        dataURL: '/data',
        onData: function(data) {

          return [{
              name: 'bid',
              data: _.map( data, function(d){
                return {
                  x: d.time,
                  y: d.bid.val
                };
              })
          },{
              name: 'ask',
              data: _.map( data, function(d){
                return {
                  x: d.time,
                  y: d.ask.val
                };
              })
          }];
        },
        onComplete: function(transport) {
          var graph = transport.graph;
          var detail = new Rickshaw.Graph.HoverDetail({ graph: graph });
          var axes = new Rickshaw.Graph.Axis.Time( { graph: graph } );
        }
    });
     
   
  </script>   
  </body>
</html>